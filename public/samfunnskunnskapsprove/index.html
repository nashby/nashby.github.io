<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Quiz</title>
    <style>
        :root {
            --primary-green: #55a57a;
            --selected-green: #5cb587;
            --orange-option: #e7a76f;
            --dark-brown: #4a2c0c;
            --light-beige: #fcf5eb;
            --medium-beige: #f4e6d3;
            
            /* Norwegian theme colors */
            --norway-red: rgba(186, 12, 47, 0.1);
            --norway-blue: rgba(0, 32, 91, 0.1);
            --norway-white: rgba(255, 255, 255, 0.8);
            --correct-green: #4CAF50;
            --incorrect-red: #F44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            background-color: var(--light-beige);
            background-image: linear-gradient(135deg, var(--norway-white) 0%, var(--light-beige) 100%);
            color: var(--dark-brown);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .quiz-container {
            width: 100%;
            height: 100%;
            max-width: 500px;
            background-color: var(--light-beige);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 0 auto;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .back-button {
            font-size: 24px;
            cursor: pointer;
            color: var(--dark-brown);
        }

        .quiz-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--dark-brown);
        }

        .skip-button {
            color: #b38d5d;
            font-weight: 500;
            cursor: pointer;
        }

        .progress-container {
            padding: 16px 16px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-green);
            border-radius: 10px;
            width: 0%; /* Will be updated by JS */
        }

        .progress-text {
            margin-top: 6px;
            font-size: 14px;
            color: var(--primary-green);
            font-weight: 500;
        }

        .question-container {
            padding: 20px 16px;
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .question-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark-brown);
            line-height: 1.3;
            margin-bottom: 24px;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: auto;
            margin-bottom: auto;
        }

        .option {
            padding: 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            font-size: 18px;
            font-weight: 500;
            background-color: var(--orange-option);
            color: var(--dark-brown);
            transition: background-color 0.2s ease;
        }

        .option-selected {
            background-color: var(--selected-green);
            color: white;
        }

        .option-correct {
            background-color: var(--correct-green);
            color: white;
        }

        .option-incorrect {
            background-color: var(--incorrect-red);
            color: white;
        }

        .check-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-green);
            font-weight: bold;
        }

        .explanation {
            font-size: 12px;
            margin-top: 4px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: underline;
            margin-left: 16px;
        }

        .chevron {
            font-size: 18px;
            color: var(--dark-brown);
        }

        .footer {
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .report-button {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #888;
            font-size: 14px;
            cursor: pointer;
        }

        .report-icon {
            font-size: 18px;
        }

        .next-button {
            padding: 12px 24px;
            background-color: var(--primary-green);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 20px;
            display: none;
        }

        .next-button.visible {
            display: block;
        }

        /* Circle decorations - Norwegian theme */
        .decoration {
            position: absolute;
            border-radius: 50%;
            z-index: -1;
        }

        .decoration-1 {
            width: 150px;
            height: 150px;
            background-color: var(--norway-red);
            top: -50px;
            right: -50px;
        }

        .decoration-2 {
            width: 100px;
            height: 100px;
            background-color: var(--norway-blue);
            bottom: -20px;
            left: -30px;
        }

        /* Light bulb icon - Fixed position */
        .lightbulb {
            position: absolute;
            right: 16px;
            top: 20px;
            color: var(--primary-green);
            opacity: 0.7;
        }

        /* Media Query for Desktop */
        @media (min-width: 768px) {
            .quiz-container {
                height: auto;
                margin: 40px auto;
                max-width: 550px;
                border: 1px solid rgba(0, 0, 0, 0.1);
                border-radius: 8px;
            }

            .question-text {
                font-size: 28px;
            }

            .option:hover {
                background-color: #e09e60;
            }

            .option.option-selected:hover {
                background-color: var(--selected-green);
            }

            .option.option-correct:hover {
                background-color: var(--correct-green);
            }

            .option.option-incorrect:hover {
                background-color: var(--incorrect-red);
            }
        }

        /* Mobile-specific styles */
        @media (max-width: 767px) {
            body {
                align-items: stretch;
                padding: 0;
            }
            
            .quiz-container {
                border-radius: 0;
                box-shadow: none;
                max-width: 100%;
            }
        }
    </style>
    <!-- Import Stimulus.js -->
    <script src="https://unpkg.com/stimulus/dist/stimulus.umd.js"></script>
</head>
<body>
    <div class="quiz-container" data-controller="quiz">
        <!-- Decorative circles -->
        <div class="decoration decoration-1"></div>
        <div class="decoration decoration-2"></div>
        
        <!-- Quiz header -->
        <div class="quiz-header">
            <div class="back-button">&#10094;</div>
            <div class="quiz-title">Math Quiz</div>
            <div class="skip-button" data-action="click->quiz#skipQuestion">Skip</div>
        </div>
        
        <!-- Progress bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" data-quiz-target="progressBar"></div>
            </div>
            <div class="progress-text" data-quiz-target="progressText">0/0</div>
        </div>
        
        <!-- Question -->
        <div class="question-container">
            <!-- Lightbulb icon -->
            <div class="lightbulb">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C8.13 2 5 5.13 5 9C5 11.38 6.19 13.47 8 14.74V17C8 17.55 8.45 18 9 18H15C15.55 18 16 17.55 16 17V14.74C17.81 13.47 19 11.38 19 9C19 5.13 15.87 2 12 2ZM14 13.7V16H10V13.7C8.48 12.63 7.5 10.89 7.5 9C7.5 6.51 9.51 4.5 12 4.5C14.49 4.5 16.5 6.51 16.5 9C16.5 10.89 15.52 12.63 14 13.7Z" fill="currentColor"/>
                    <path d="M11 20H13V22H11V20Z" fill="currentColor"/>
                </svg>
            </div>
            
            <div class="question-text" data-quiz-target="questionText"></div>
            
            <!-- Options -->
            <div class="options-container" data-quiz-target="optionsContainer">
                <!-- Options will be generated by JS -->
            </div>

            <button class="next-button" data-quiz-target="nextButton" data-action="click->quiz#nextQuestion">Next Question</button>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="report-button">
                <span class="report-icon">&#9888;</span>
                <span>Report question</span>
            </div>
        </div>
    </div>

    <script>
        // Define the quiz data
        const quizData = [
            { 
                topic: "Utdanning, kompetanse og arbeidsliv - Barnehage, Grunnskole, Samarbeid, Videregående, Høyere utdanning, Lånekassen, Livslang læring, Norskopplæring", 
                question: "Hva er ett av målene med aktiviteter i barnehagen, ifølge teksten?", 
                options: [ 
                    "At barna lærer å bli bedre enn andre.", 
                    "At barna blir bedre forberedt til å begynne på skolen.", 
                    "At barna kun leker fritt uten planlegging.", 
                ], 
                correctAnswer: "At barna blir bedre forberedt til å begynne på skolen.", 
            },
            { 
                topic: "Utdanning, kompetanse og arbeidsliv - Barnehage, Grunnskole, Samarbeid, Videregående, Høyere utdanning, Lånekassen, Livslang læring, Norskopplæring", 
                question: "Hvilke verdier skal barnehagen bygge på, i henhold til barnehageloven?", 
                options: [ 
                    "Kun verdier fra én spesifikk religion.", 
                    "Grunnleggende verdier i kristen og humanistisk tradisjon, forankret i menneskerettighetene.", 
                    "Verdier som fokuserer utelukkende på individuell prestasjon.", 
                ], 
                correctAnswer: "Grunnleggende verdier i kristen og humanistisk tradisjon, forankret i menneskerettighetene.", 
            },
            { 
                topic: "Utdanning, kompetanse og arbeidsliv - Barnehage, Grunnskole, Samarbeid, Videregående, Høyere utdanning, Lånekassen, Livslang læring, Norskopplæring", 
                question: "Hva har foreldre som ikke snakker norsk rett til på foreldremøter i barnehagen?", 
                options: [ 
                    "Å få møtet utsatt til de lærer norsk.", 
                    "Å ha med seg tolk.", 
                    "Å motta skriftlig referat på engelsk.", 
                ], 
                correctAnswer: "Å ha med seg tolk.", 
            }
        ];

        // Initialize Stimulus application
        (function() {
            const application = Stimulus.Application.start();
            
            application.register("quiz", class extends Stimulus.Controller {
                static targets = ["questionText", "optionsContainer", "progressBar", "progressText", "nextButton"];
                
                connect() {
                    this.currentQuestionIndex = 0;
                    this.score = 0;
                    this.answered = false;
                    this.loadQuestion();
                    this.updateProgress();
                }
                
                loadQuestion() {
                    const currentQuestion = quizData[this.currentQuestionIndex];
                    this.questionTextTarget.textContent = currentQuestion.question;
                    
                    // Clear previous options
                    this.optionsContainerTarget.innerHTML = '';
                    
                    // Create option elements
                    currentQuestion.options.forEach((option, index) => {
                        const optionElement = document.createElement('div');
                        optionElement.className = 'option';
                        optionElement.dataset.action = 'click->quiz#selectOption';
                        optionElement.dataset.index = index;
                        
                        const optionText = document.createElement('div');
                        optionText.textContent = option;
                        
                        const chevron = document.createElement('div');
                        chevron.className = 'chevron';
                        chevron.innerHTML = '&#10095;';
                        
                        optionElement.appendChild(optionText);
                        optionElement.appendChild(chevron);
                        
                        this.optionsContainerTarget.appendChild(optionElement);
                    });
                    
                    this.answered = false;
                    this.nextButtonTarget.classList.remove('visible');
                }
                
                selectOption(event) {
                    if (this.answered) return;
                    
                    const selectedIndex = event.currentTarget.dataset.index;
                    const currentQuestion = quizData[this.currentQuestionIndex];
                    const selectedOption = currentQuestion.options[selectedIndex];
                    const isCorrect = selectedOption === currentQuestion.correctAnswer;
                    
                    // Mark all options
                    const options = this.optionsContainerTarget.querySelectorAll('.option');
                    options.forEach((option, index) => {
                        const optionText = currentQuestion.options[index];
                        
                        if (index == selectedIndex) {
                            if (isCorrect) {
                                option.classList.add('option-correct');
                                
                                // Replace chevron with check icon
                                const checkIcon = document.createElement('div');
                                checkIcon.className = 'check-icon';
                                checkIcon.textContent = '✓';
                                option.querySelector('.chevron').replaceWith(checkIcon);
                            } else {
                                option.classList.add('option-incorrect');
                            }
                        } else if (optionText === currentQuestion.correctAnswer) {
                            option.classList.add('option-correct');
                            
                            // Replace chevron with check icon
                            const checkIcon = document.createElement('div');
                            checkIcon.className = 'check-icon';
                            checkIcon.textContent = '✓';
                            option.querySelector('.chevron').replaceWith(checkIcon);
                        }
                    });
                    
                    if (isCorrect) {
                        this.score++;
                    }
                    
                    this.answered = true;
                    this.nextButtonTarget.classList.add('visible');
                }
                
                nextQuestion() {
                    this.currentQuestionIndex++;
                    
                    if (this.currentQuestionIndex < quizData.length) {
                        this.loadQuestion();
                        this.updateProgress();
                    } else {
                        this.showResults();
                    }
                }
                
                skipQuestion() {
                    if (!this.answered) {
                        this.nextQuestion();
                    }
                }
                
                updateProgress() {
                    const progressPercent = ((this.currentQuestionIndex) / quizData.length) * 100;
                    this.progressBarTarget.style.width = `${progressPercent}%`;
                    this.progressTextTarget.textContent = `${this.currentQuestionIndex + 1}/${quizData.length}`;
                }
                
                showResults() {
                    this.questionTextTarget.textContent = `Quiz completed! Your score: ${this.score}/${quizData.length}`;
                    this.optionsContainerTarget.innerHTML = '';
                    this.nextButtonTarget.classList.remove('visible');
                    
                    // Show restart button
                    const restartButton = document.createElement('button');
                    restartButton.className = 'next-button visible';
                    restartButton.textContent = 'Restart Quiz';
                    restartButton.addEventListener('click', () => {
                        this.currentQuestionIndex = 0;
                        this.score = 0;
                        this.loadQuestion();
                        this.updateProgress();
                    });
                    
                    this.optionsContainerTarget.appendChild(restartButton);
                }
            });
        })();
    </script>
</body>
</html>